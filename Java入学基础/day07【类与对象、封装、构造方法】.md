# day07【类与对象、封装、构造方法】

## 今日内容

- 面向对象
- 类与对象
- 三大特征——封装
- 构造方法

## 教学目标

- [ ] 能够知道类和对象的关系

- [ ] 能够完成类的定义及使用

- [ ] 能够知道对象在内存中的初始化过程

- [ ] 能够知道局部变量和成员变量的区别

- [ ] 能够知道private关键字的特点

- [ ] 能够知道this关键字的作用

- [ ] 能够知道构造方法的格式和注意事项

- [ ] 能够完成一个标准类代码的编写及测试


# 第1章 面向对象思想

## 1.1 面向对象思想概述

### 概述

Java语言是一种面向对象的程序设计语言，而面向对象思想是一种程序设计思想，我们在面向对象思想的指引下，使用Java语言去设计、开发计算机程序。
这里的**对象**泛指现实中一切事物，每种事物都具备自己的**属性**和**行为**。面向对象思想就是在计算机程序设计过程中，参照现实中事物，将事物的属性特征、行为特征抽象出来，描述成计算机事件的设计思想。
它区别于面向过程思想，强调的是通过调用对象的行为来实现功能，而不是自己一步一步的去操作实现。

```
面向对象思想总结:
    1.面向过程:当要实现一个功能时,需要亲力亲为,处理每个细节
    2.面向对象:当要实现一个功能时,不关心具体的实现步骤,只关心结果,找一个具有该功能的类,帮我们做事
    3.面向对象的思想
        (1)面向对象是基于面向过程的编程思想.
        (2)面向过程:强调的是每一个功能的步骤
        (3)面向对象:强调的是对象,然后由对象去调用功能
    4.特点
        (1)是一种更符合我们思考习惯的思想
        (2)可以将复杂的事情简单化
        (3)角色发生了转换,将我们从执行者变成了指挥者
```



### 举例

洗衣服:

![面向对象和过程](img/面向对象和过程.png)

* 面向过程：把衣服脱下来-->找一个盆-->放点洗衣粉-->加点水-->浸泡10分钟-->揉一揉-->清洗衣服-->拧干-->晾起来
* 面向对象：把衣服脱下来-->打开全自动洗衣机-->扔衣服-->按钮-->晾起来

区别:

* 面向过程：强调步骤。


* 面向对象：强调对象，这里的对象就是洗衣机。

### 特点

面向对象思想是一种更符合我们思考习惯的思想，它可以将复杂的事情简单化，并将我们从执行者变成了指挥者。面向对象的语言中，包含了三大基本特征，即封装、继承和多态。

## 1.2 类和对象

环顾周围，你会发现很多对象，比如桌子，椅子，同学，老师等。桌椅属于办公用品，师生都是人类。那么什么是类呢？什么是对象呢？



### 什么是类

* **类**：是一组相关**属性**和**行为**的集合。可以看成是一类事物的模板，使用事物的属性特征和行为特征来描述该类事物。

现实中，描述一类事物：

* **属性**：就是该事物的状态信息。
* **行为**：就是该事物能够做什么。

举例：小猫。

	属性：名字、体重、年龄、颜色。
	行为：走、跑、叫。

### 什么是对象

* **对象**：是一类事物的具体体现。对象是类的一个**实例**（对象并不是找个女朋友），必然具备该类事物的属性和行为。

现实中，一类事物的一个实例：一只小猫。或者具体某个人。

举例：一只小猫。

	属性：tom、5kg、2 years、yellow。
	行为：溜墙根走、蹦跶的跑、喵喵叫。

一个人：

```
属性：姓名：锁哥  年龄  18   性别：男
行为：吃饭  睡觉 
```

### 类与对象的关系

- 类是对一类事物的描述，是**抽象的**。
- 对象是一类事物的实例，是**具体的**。
- **类是对象的模板，对象是类的实体**。
- 类是描述大的范围的事物，对象是大范围事物下的具体的一个结果。
- 先有类，后有对象。

![](img/1.jpg) 

## 1.3 类的定义

要把生活中存在的具体的个体，以及某个事物最终用Java程序来体现：

生活中的一类事物，可以对应Java中的某个class程序，而把这个class程序称为一个类。因此上述分析的所有的对象，我们都可以使用Java中的类来封装和描述。

当我们需要把生活中的事物使用Java中的类进行封装和描述的时候：

首先需要先分析当前生活中的事物具有哪些基本的特点（基本的属性），具备的功能/行为/动作(用java中的函数表示)）。然后通过分析在和Java中的类建立对应的关系。最后才能使用Java中的类描述。

 

人的案例：

我们应该从具体的某个人，或者从某几个人中开始分析当前人这一类事物具备的共性特点。

人具备基本的数据：身高、体重、年龄、姓名、性别.......

人具备的基本功能：吃饭、睡觉、学习。



人

{

​	身高

​	体重

​	年龄

​	性别

​	姓名

​	吃饭（）{}

​	睡觉（）{}

​	学习（）{}

}

 

分析完某一类事物具备的共性特征之后，就要开始考虑这类事物的那些基本的数据应该使用Java中的什么描述？而事物的基本功能应该使用Java中的什么描述？

事物的基本数据，一般在生活中就是一个数据，这个数据可以使用学习过的一个变量来表示。

事物的行为/功能/动作，可以使用Java中的方法来描述。

用Java中的类 描述 当前分析的这个事物：事物的名称，就是Java中的类名

class Person

{

​	double height;  //身高

​	double weight;  //体重

​	int age;        //年龄

​	char sex;      //性别

​	String name;   // 姓名

​	//描述人这类事物的共性行为

​	//前面的函数修饰符不用写

​	void eat()//吃饭

​	{

​	} 

​	void sleep()//睡觉

​	{

​	} 

​	void study()//学习

​	{

​	}

}

当描述完一个事物之后，要在Java程序中使用这个事物，首先需要使用new 关键字创建出这个事物在Java中的对象，然后通过这个对象就可以调用其中的所有特征。

 

Person p = new Person();  //创建出了一个人 对象

p.age = 23;

p.name = “班导”;

p.sex = ‘女’;

 

p.eat();

p.sleep();

p.study();

 

注意：如果在当前这个class类仅仅只是为了描述一个事物，不需要独立运行

​	所以可以不用写main函数，如果一个类需要独立运行，那么必须得写main函数

### 需求：用java代码描述人的一些属性和具有的行为（功能）

```java
/*

	当前这个class类仅仅只是为了描述一个事物，不需要独立运行

	所以可以不用写main函数

*/

class Person 

{

	/*

		定义变量描述人的基本特性

	*/

	double height;//身高

	double weight;//体重

	int age;//年龄

	char sex;//性别

	String name;//姓名

	//定义功能描述人类的行为

	void sleep()//睡觉

	{

		System.out.println("sleep");

		

	}

	void eat()//吃饭

	{

		System.out.println("eat");

	}

	void study()//学习

	{

		System.out.println("study");

	}

}
```

## 1.4 对象的使用

### 对象的使用格式

创建对象：

```java
类名 对象名 = new 类名();
Person p=new Person();
```

使用对象访问类中的成员:

```java
对象名.成员变量；
p.name
对象名.成员方法名(实际参数)；
p.eat();
```

对象的使用格式举例:

```java
/*
	书写一个测试类
	在该类中需要使用上面类中的属性和方法
*/
class PersonTest
{
	/*
		需要独立运行，所以需要主方法
	*/
	public static void main(String[] args)
	{
		//创建类Person的对象
		Person person=new Person();
		//给类中的属性赋值
		person.age=18;//person.age表示使用person对象调用Person类中的age属性
		person.name="班导";//person.name表示使用person对象调用Person类中的name属性
		person.sex='女';//person.sex表示使用person对象调用Person类中的sex属性
		/*
			使用person对象调用Person类中的方法
		*/
		person.sleep();
	}
}
```

## 1.5 对象的内存图解和练习1(掌握、课下画图)

需求：描述生活中的车这一类事物：

车的基本数据（属性）：

​	颜色

​	品牌(车名)

​	车牌号码

车的基本行为（功能）：

​	跑(运行)

分析和步骤：

定义一个车类class，名字为Car。因为在类Car中不需要独立运行，只是描述车的属性，所以不用定义main函数。

定义完类Car,需要定义一个测试类CarTest来测试车的属性和和功能。

```java
class Car 
{
	//车的基本属性
	String color;
	String name;
	String number;

	//车的行为
	void run()
	{
System.out.println("车的颜色："+ color +"，车的品牌：" + name);
	}
}
class CarTest
{
	public static void main(String[] args) 
	{
		//创建车的对象
		Car c = new Car();
		//给车的属性赋值
		c.color = "yellow";
		c.name = "BMW";
		c.number= "沪A88888";
		c.run();
	}
}
```

以上的代码在内存中执行的图解如下图所示：

![](img/对象内存图解练习1.jpg)

说明：当上述代码写完之后，就会在idea中保存编译.java文件，生成class类文件，如果想看到运行效果，那么我们就会在idea中运行程序来启动jvm虚拟机来运行class文件，而在启动完虚拟机的时候，jvm虚拟机就会在内存中开辟5个内存空间**栈内存**，**堆内存**，**方法区**，本地方法区和寄存器。

由于在idea中我们是运行CarTest类，所以jvm会去硬盘上加载CarTest.class文件，将CarTest.class类文件加载到内存中的方法区中。Jvm就开始在CarTest.class文件中找main方法运行。

执行到new Car();的时候，jvm首先会在当前java环境中（其实就是方法区中）找，如果没有找到，那么jvm就会去当前的硬盘中找Car.class类文件，如果再找不到就会报错。如果找到，就会将类文件加载到方法区中。

在java中如果是new关键字开辟的内存都是在堆内存中开辟，而在Car的类中定义的变量也会在堆内存中开辟变量空间，在堆内存中开辟的空间都有默认初始化值，这里的三个变量都是引用类型，所以初始化值是null.

在程序中使用一个类来描述生活中的某一类事物，而事物的基本属性我们使用了变量描述。这些变量的书写位置和类中的函数属于并列关系。这时这些变量称为类中的**成员变量**。而类中负责描述行为（功能）的函数称为类中的**成员方法**。

在类中定义成员变量，和前面学习的定义变量没有任何区别。只是把变量写在类的成员位置上而已。

类中的成员函数（成员方法），它和我们学习的函数定义完全一致。

**在使用Java中的new 关键字创建当前这个类的对象时， 这个类中的所有成员变量，会随着对象在堆中的出现而存在。所有成员变量随着的对象在堆中出现之后，都会有默认的初始化值。**

### 成员变量的默认值

|          | 数据类型                       | 默认值   |
| -------- | ------------------------------ | -------- |
| 基本类型 | 整数（byte，short，int，long） | 0        |
|          | 浮点数（float，double）        | 0.0      |
|          | 字符（char）                   | '\u0000' |
|          | 布尔（boolean）                | false    |
| 引用类型 | 数组，类，接口                 | null     |

## 1.6 类与对象的练习2

描述Car类的代码：

```java
class Car 
{
	//车的基本属性
	String color;
	String name;
	String number;

	//车的行为
	void run()
	{
System.out.println("车的颜色："+ color +"，车的品牌：" + name);
	}
}
```

测试类代码：

```java
class CarTest
{
	public static void main(String[] args) 
	{
		//创建车的对象
		Car c = new Car();
		//给车的属性赋值 给c对象空间的属性赋值
		c.color = "yellow";
		c.name = "BMW";
		c.number= "沪A88888";
		c.run();
        //创建车的对象 
		Car c1 = new Car();
        //使用c1对象调用run方法
     	c1.run();
	}
}
```



**注意：只要在程序中使用new关键字创建对象，那么在堆中都会有一个新的对象产生。**

说明：因为重新创建了一个新的车的对象，这时在堆中又会有一个新的空间。

由于创建的新的车对象没有进行手动的赋值，这时这个对象中的所有成员变量的值都是默认的值。

出现以上的情况的内存图解说明：

![](img/内存中多个对象图解.jpg)

#### 一个引用，作为参数传递到方法中内存图

![](img/对象作为方法参数传递.jpg)

> **引用类型作为参数，传递的是地址值。**

## 1.7 成员变量和局部变量区别

变量根据定义**位置的不同**，我们给变量起了不同的名字。如下图所示：

![](img/5.jpg)

- 局部变量：定义在函数（方法）中的那些变量。**局部变量只在定义它的方法(函数)中有效。**

  成员变量：定义在类的成员位置上的变量。成员变量在整个类中都有效。(全局变量是成员变量的俗称)。

   

  成员变量又分为 实例(对象)变量 和 类变量(static静态变量)。(先了解，后面会详细讲解)

  class Car

  { 

  String color; //color为实例变量

  static String name; //只要有关键字static修饰,name为类变量

  }

   

  不管是成员变量还是局部变量它们都符合第二天学习的变量的定义规则。

  1) 数据类型 变量名 ;

  2) 数据类型 变量名=值;

  思考下面代码的结果是什么？

![](img/思考结果是什么.jpg)

**注意**：在类中和该类的一个函数中，同时存在一个相同类型相同名称的变量，在函数被执行时，函数中优先使用定义在函数中的变量(局部变量)。

**优先级**：先使用内部的，再使用外部的（先去内部找，有就使用。没有则再去外部找）就近原则。

 

局部变量和成员变量的区别：

1、从定义上来讲：

局部变量定义在函数中。

成员变量定义在类中。

2、从内存存储上来讲：

局部变量随着函数的运行会在栈内存中出现，局部变量存储在栈内存中。

成员变量会随着对象的出现在堆中存在，成员变量存储在堆内存中。

3、从初始值上来讲：

局部变量在定义时需要指定初始值（局部变量没有默认值），只有初始化之后才能使用。

成员变量可以不用初始化，有默认值。

4、从存活时间上来讲（生命周期）

局部变量是随着函数的进栈在函数所属的栈内存中存在，随着函数的出栈就消失。

成员变量是随着对象的出现在堆中出现。随着对象的消失而消失。




# 第2章 封装

## 2.1 封装概述

### 概述

面向对象编程语言是对客观世界的模拟，客观世界里成员变量都是隐藏在对象内部的，外界无法直接操作和修改。

封装表示对事物进行包装。封装会造成事物的部分细节被隐藏。

面向对象编程语言中的成员变量都是隐藏在对象内部的，外界无法直接操作和修改。封装可以被认为是一个保护屏障，防止该类的代码和数据被其他类随意访问。要访问该类的数据，必须通过指定的方式。适当的封装可以让代码更容易理解与维护，也加强了代码的安全性。

### 原则

将**属性隐藏**起来，若需要访问某个属性，**提供公共方法**对其访问。

## 2.2 封装的步骤

1. 使用 `private` 关键字来修饰成员变量。
2. 对需要访问的成员变量，提供对应的一对 `getXxx`方法 、`setXxx` 方法。

## 2.3 封装的操作——private关键字

### private的含义

1. private是一个权限修饰符，代表最小权限。
2. 可以修饰成员变量和成员方法。
3. 被private修饰后的成员变量和成员方法，只在本类中才能访问。

### private的使用格式

```java
private 数据类型 变量名 ；
```

1. 使用 `private` 修饰成员变量，代码如下：

```java
public class Student {
  private String name;
  private int age;
}
```

2. 提供 `getXxx`方法 / `setXxx` 方法，可以访问成员变量，代码如下：

```java
public class Student {
  private String name;
  private int age;

  public void setName(String n) {
    name = n;
  }

  public String getName() {
    return name;
  }

  public void setAge(int a) {
    age = a;
  }

  public int getAge() {
    return age;
  }
}
```

## 2.4 封装优化1——this关键字

我们发现 `setXxx` 方法中的形参名字并不符合见名知意的规定，那么如果修改与成员变量名一致，是否就见名知意了呢？代码如下：

```java
public class Student {
  private String name;
  private int age;
  public void setName(String name) {
    name = name;
  }

  public void setAge(int age) {
    age = age;
  }
}
```
经过修改和测试，我们发现新的问题，成员变量赋值失败了。也就是说，在修改了`setXxx()` 的形参变量名后，方法并没有给成员变量赋值！这是由于形参变量名与成员变量名重名，导致成员变量名被隐藏，方法中的变量名，无法访问到成员变量，从而赋值失败。所以，我们只能使用this关键字，来解决这个重名问题。

### this的含义

this代表所在类的当前对象的引用（地址值），即对象自己的引用。

> 记住 ：方法被哪个对象调用，方法中的this就代表那个对象。即谁在调用，this就代表谁。

### this使用格式

```java
this.成员变量名；
```

使用 `this` 修饰方法中的变量，解决成员变量被隐藏的问题，代码如下：

```java
public class Student {
  private String name;
  private int age;

  public void setName(String name) {
    //name = name;
    this.name = name;
  }

  public String getName() {
    return name;
  }

  public void setAge(int age) {
    //age = age;
    this.age = age;
  }

  public int getAge() {
    return age;
  }
}
```

> 小贴士：方法中只有一个变量名时，默认也是使用 `this` 修饰，可以省略不写。
>

## 2.5 封装优化2——构造方法

当一个对象被创建时候，构造方法用来初始化该对象，给对象的成员变量赋初始值。

> 小贴士：无论你与否自定义构造方法，所有的类都有构造方法，因为Java自动提供了一个无参数构造方法，一旦自己定义了构造方法，Java自动提供的默认无参数构造方法就会失效。

### 构造方法的定义格式

```java
修饰符 构造方法名(参数列表){
	// 方法体
}
```
构造方法的写法上，方法名与它所在的类名相同。它没有返回值，所以不需要返回值类型，甚至不需要void。使用构造方法后，代码如下：

```java
public class Student {
  private String name;
  private int age;
  // 无参数构造方法
  public Student() {} 
  // 有参数构造方法
  public Student(String name,int age) {
    this.name = name;
    this.age = age; 
  }
}
```

### 注意事项

1. 如果你不提供构造方法，系统会给出无参数构造方法。

2. 如果你提供了构造方法，系统将不再提供无参数构造方法。

3. 构造方法是可以重载的，既可以定义参数，也可以不定义参数。

4. 构造方法和setXxx方法区别？

   构造方法是new创建某个类的对象时调用的，来给类中的成员变量初始化。创建一个类的对象必须调用这个类的构造方法。

   setXxx()方法，是使用所属类对象调用的，是在对象创建成功之后才使用创建的对象调用给成员变量赋值的。


##  2.6 标准代码——JavaBean

`什么是JavaBean呢？

JavaBean是 Java语言编写类的一种标准规范。JavaBean在任何官方网站都没有一个正式的概念来定义它，只是我们根据它的特点来定义它为JavaBean，其实他就是一个普通的Java类，用来封装数据的，它具备如下特点：

1、要求这个类必须拥有一个公共的空参数的构造方法，外界可以访问到；

2、它如果有属性（成员变量），全部必须私有；

3、对外提供公共的get或者set方法，并且方法的命名要遵守一定的规则。

举例：

属性 name ----- 方法 getName setName (属性首字母大写，在前面加上 get和set )。

属性 age ----- 方法 getAge setAge 。

把这样的一个类称为一个JavaBean类。这个类在程序中主要用于封装数据。

new一个对象，通过set方法给所有的属性设置值，在其他的程序就可以通过这个对象的get方法获取值。

如下所示：

```java
public class ClassName{
    //成员变量
    //构造方法
    //无参构造方法【必须】
    //有参构造方法【建议】
    //成员方法	
    //getXxx()
    //setXxx()
}
```

 编写符合`JavaBean` 规范的类，以学生类为例，标准代码如下：

```java
public class Student {
    //成员变量
    private String name;
    private int age;

    //构造方法
    public Student() {}

    public Student(String name,int age) {
        this.name = name;
        this.age = age;
    }

    //成员方法
    publicvoid setName(String name) {
        this.name = name;
    }

    public String getName() {
        return name;
    }

    publicvoid setAge(int age) {
        this.age = age;
    }

    publicint getAge() {
        return age;
    }
}
```

测试类，代码如下：

```java
public class TestStudent {
    public static void main(String[] args) {
        //无参构造使用
        Student s= new Student();
        s.setName("柳岩");
        s.setAge(18);
        System.out.println(s.getName()+"---"+s.getAge());

        //带参构造使用
        Student s2= new Student("赵丽颖",18);
        System.out.println(s2.getName()+"---"+s2.getAge());
    }
}
```